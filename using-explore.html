<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Laika 0.18.1 + Helium Theme" />
    <title>Making an Explorer for your Art Piece</title>
    
      <meta name="author" content="Noel Welsh"/>
    
    
      <meta name="description" content="docs"/>
    
    
      <link rel="icon" sizes="32x32" type="image/png" href="https://typelevel.org/img/favicon.png"/>
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.207/distr/fira_code.css">
    
    <link rel="stylesheet" type="text/css" href="helium/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="helium/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="site/styles.css" />
    <script src="helium/laika-helium.js"></script>
    <script src="main.js"></script>
    <script src="main.js"></script>
    <script src="helium/laika-helium.js"></script>
    
    
    <script> /* for avoiding page load transitions */ </script>
  </head>

  <body>

    <header id="top-bar">

      <div class="row">
        <a id="nav-icon">
          <i class="icofont-laika" title="Navigation">&#xefa2;</i>
        </a>
        
      </div>

      <a class="icon-link" href="https://creativescala.org"><i class="icofont-laika" title="Home">&#xef47;</i></a>

      <span class="row links"><a class="icon-link svg-link" href="https://github.com/creativescala/doodle-explore"><span title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a></span>

    </header>

    <nav id="sidebar">

      <div class="row">
        <a class="icon-link svg-link" href="https://github.com/creativescala/doodle-explore"><span title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
      </div>

      <ul class="nav-list">
        <li class="level1"><a href="index.html">Doodle Explore</a></li>
        <li class="level1 active"><a href="#">Making an Explorer for your Art Piece</a></li>
        <li class="level1"><a href="explorer-types.html">Explorer Types</a></li>
        <li class="level1"><a href="writing-a-backend.html">Writing an Explore Backend</a></li>
      </ul>

      <ul class="nav-list">
        <li class="level1 nav-header">Related Projects</li>
        
          <li class="level2"><a href="https://creativescala.org/doodle">Doodle</a></li>
        
          <li class="level2"><a href="https://creativescala.github.io/doodle-svg">Doodle SVG</a></li>
        
          <li class="level2"><a href="https://creativescala.org">Creative Scala</a></li>
        
      </ul>

    </nav>

    <div id="container">

      <nav id="page-nav">
        <p class="header"><a href="#">Making an Explorer for your Art Piece</a></p>

        <ul class="nav-list">
          <li class="level1"><a href="#explorer">Explorer</a></li>
          <li class="level1"><a href="#render">Render</a></li>
        </ul>

        <p class="footer"></p>
      </nav>

      <main class="content">

        <h1 id="making-an-explorer-for-your-art-piece" class="title">Making an Explorer for your Art Piece</h1>
        <p>Using Explore, creating a GUI for your Doodle art means writing
        two functions: <code>explorer</code>, and <code>render</code>. <code>explorer</code> describes the
        GUI of the doodle, and <code>render</code> generates a <code>Picture</code> from the GUI&#39;s
        output values.</p>
        
        <h2 id="explorer" class="section">Explorer<a class="anchor-link right" href="#explorer"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>Your <code>explorer</code> function describes the GUI for your doodle, implicitly using
        a few <code>explore</code> interpreters targeting your preferred backend. You&#39;ll need
        an implicit argument for each type of component, e.g. <code>ExploreInt</code> or <code>ExploreColor</code>.
        You&#39;ll probably also want to use a <code>Layout</code> interpreter. Interpreters are generic
        over their <code>Component</code> type, which corresponds to the targeted backend. The two
        backends built in to Doodle Explore are <code>doodle.explore.java2d.Component</code>, targeting
        Java Swing, and <code>doodle.explore.laminar.Component</code>, targeting HTML/JS via <code>laminar</code>.</p>
        <p>Let&#39;s make a simple GUI for the Sierpinski triangle using <code>explore</code>. It should allow
        users to adjust the base triangle size, the number of iterations, and the stroke color
        of the triangles. To accomplish this, we&#39;ll need the interpreters <code>ExploreInt</code> and <code>ExploreColor</code>
        for our components, and then a <code>Layout</code> interpreter to put them together. We&#39;ll start with the
        <code>java2d</code> backend to avoid dealing with HTML. Our function skeleton looks like this:</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">doodle</span><span>.</span><span class="identifier">explore</span><span>.</span><span class="identifier">java2d</span><span>.</span><span class="type-name">Component</span><span>
</span><span class="keyword">import</span><span> </span><span class="identifier">doodle</span><span>.</span><span class="identifier">explore</span><span>.{</span><span class="type-name">ExploreInt</span><span>, </span><span class="type-name">ExploreColor</span><span>, </span><span class="type-name">Layout</span><span>}

</span><span class="keyword">def</span><span> </span><span class="declaration-name">explorer</span><span>(</span><span class="identifier">using</span><span>
    </span><span class="identifier">intGui</span><span>: </span><span class="type-name">ExploreInt</span><span>[</span><span class="type-name">Component</span><span>],
    </span><span class="identifier">colorGui</span><span>: </span><span class="type-name">ExploreColor</span><span>[</span><span class="type-name">Component</span><span>],
    </span><span class="identifier">layoutGui</span><span>: </span><span class="type-name">Layout</span><span>[</span><span class="type-name">Component</span><span>],
) = {
    </span><span class="keyword">import</span><span> </span><span class="identifier">intGui</span><span>.</span><span class="identifier">_</span><span>
    </span><span class="keyword">import</span><span> </span><span class="identifier">colorGui</span><span>.</span><span class="identifier">_</span><span>

    ???
}</span></code></pre>
        <p>Now let&#39;s add some components. To add a GUI component that outputs an
        integer, we can use any function found in <code>ExploreInt</code> that returns a <code>F[Int]</code>.
        To start out with, use <code>int(label: String)</code>. This element will adjust the
        base size of the triangles. We probably want to restrict this to a range,
        so we can use <code>within</code>. <code>IntComponentOps</code> contains a few extension methods
        so we can call it in infix.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Base Size&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">30</span><span>)</span></code></pre>
        <p>To compose multiple components and choose how they are layed out, we use
        <code>Layout</code>. Let&#39;s add another integer to adjust the number of iterations:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Base Size&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">30</span><span>) 
    .</span><span class="identifier">beside</span><span>(</span><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Iterations&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">6</span><span>).</span><span class="identifier">withDefault</span><span>(</span><span class="number-literal">2</span><span>))</span></code></pre>
        <p>Finally, we&#39;ll use <code>ExploreColor</code> to add a color picker. Our final function
        looks like this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">explorer</span><span>(</span><span class="identifier">using</span><span>
    </span><span class="identifier">intGui</span><span>: </span><span class="type-name">ExploreInt</span><span>[</span><span class="type-name">Component</span><span>],
    </span><span class="identifier">colorGui</span><span>: </span><span class="type-name">ExploreColor</span><span>[</span><span class="type-name">Component</span><span>],
    </span><span class="identifier">layoutGui</span><span>: </span><span class="type-name">Layout</span><span>[</span><span class="type-name">Component</span><span>],
) = {
    </span><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Base Size&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">30</span><span>) 
        .</span><span class="identifier">beside</span><span>(</span><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Iterations&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">6</span><span>).</span><span class="identifier">withDefault</span><span>(</span><span class="number-literal">2</span><span>))
        .</span><span class="identifier">above</span><span>(</span><span class="identifier">color</span><span>(</span><span class="string-literal">&quot;Stroke Color&quot;</span><span>))
}</span></code></pre>
        
        <h2 id="render" class="section">Render<a class="anchor-link right" href="#render"><i class="icofont-laika">&#xef71;</i></a></h2>
        <p>The <code>render</code> function describes how to create a <code>Picture</code> from the values
        produced by your <code>explorer</code>. Because the output of the explorer will be
        a nested tuple, it is best to use an anonymous function to destructure
        the values and then pass them to another function that handles the rest.
        For this to work, we have to pass the function directly to our <code>explorer.explore</code>
        call so that type inference takes effect.</p>
        <p>For this example, we will use the sierpinski function from <code>doodle.image.examples.Sierpinski</code>.
        We&#39;ll also use the following frame: </p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">frame</span><span> = </span><span class="type-name">Frame</span><span>(
    </span><span class="type-name">FixedSize</span><span>(</span><span class="number-literal">1200.0</span><span>, </span><span class="number-literal">1200.0</span><span>),
    </span><span class="string-literal">&quot;Explore&quot;</span><span>,
    </span><span class="type-name">AtOrigin</span><span>,
    </span><span class="type-name">Some</span><span>(</span><span class="type-name">Color</span><span>.</span><span class="identifier">white</span><span>),
    </span><span class="type-name">ClearToBackground</span><span>,
)</span></code></pre>
        <p>Using this, we can finally run our explorer with:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">explorer</span><span>.</span><span class="identifier">explore</span><span>(</span><span class="identifier">frame</span><span>, { </span><span class="keyword">case</span><span> ((</span><span class="identifier">size</span><span>, </span><span class="identifier">iterations</span><span>), </span><span class="identifier">color</span><span>) =&gt;
    </span><span class="type-name">Image</span><span>.</span><span class="identifier">compile</span><span> {
        </span><span class="identifier">doodle</span><span>.</span><span class="identifier">image</span><span>.</span><span class="identifier">examples</span><span>.</span><span class="type-name">Sierpinski</span><span>.</span><span class="identifier">sierpinski</span><span>(</span><span class="identifier">iterations</span><span>, </span><span class="identifier">size</span><span>).</span><span class="identifier">strokeColor</span><span>(</span><span class="identifier">color</span><span>)
    }
})</span></code></pre>
        <hr>
        <p>Our final code is this:</p>
        <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">explorer</span><span>(</span><span class="identifier">using</span><span>
    </span><span class="identifier">intGui</span><span>: </span><span class="type-name">ExploreInt</span><span>[</span><span class="type-name">Component</span><span>],
    </span><span class="identifier">colorGui</span><span>: </span><span class="type-name">ExploreColor</span><span>[</span><span class="type-name">Component</span><span>],
    </span><span class="identifier">layoutGui</span><span>: </span><span class="type-name">Layout</span><span>[</span><span class="type-name">Component</span><span>],
) = {
    </span><span class="keyword">import</span><span> </span><span class="identifier">intGui</span><span>.</span><span class="identifier">_</span><span>
    </span><span class="keyword">import</span><span> </span><span class="identifier">colorGui</span><span>.</span><span class="identifier">_</span><span>

    </span><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Base Size&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">30</span><span>) 
        .</span><span class="identifier">beside</span><span>(</span><span class="identifier">int</span><span>(</span><span class="string-literal">&quot;Iterations&quot;</span><span>).</span><span class="identifier">within</span><span>(</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="number-literal">6</span><span>).</span><span class="identifier">withDefault</span><span>(</span><span class="number-literal">2</span><span>))
        .</span><span class="identifier">above</span><span>(</span><span class="identifier">color</span><span>(</span><span class="string-literal">&quot;Stroke Color&quot;</span><span>))
}

</span><span class="keyword">val</span><span> </span><span class="identifier">frame</span><span> = </span><span class="type-name">Frame</span><span>(
    </span><span class="type-name">FixedSize</span><span>(</span><span class="number-literal">1200.0</span><span>, </span><span class="number-literal">1200.0</span><span>),
    </span><span class="string-literal">&quot;Explore&quot;</span><span>,
    </span><span class="type-name">AtOrigin</span><span>,
    </span><span class="type-name">Some</span><span>(</span><span class="type-name">Color</span><span>.</span><span class="identifier">white</span><span>),
    </span><span class="type-name">ClearToBackground</span><span>,
)

</span><span class="identifier">explorer</span><span>.</span><span class="identifier">explore</span><span>(</span><span class="identifier">frame</span><span>, { </span><span class="keyword">case</span><span> ((</span><span class="identifier">size</span><span>, </span><span class="identifier">iterations</span><span>), </span><span class="identifier">color</span><span>) =&gt;
    </span><span class="type-name">Image</span><span>.</span><span class="identifier">compile</span><span> {
        </span><span class="identifier">doodle</span><span>.</span><span class="identifier">image</span><span>.</span><span class="identifier">examples</span><span>.</span><span class="identifier">sierpinski</span><span>(</span><span class="identifier">iterations</span><span>, </span><span class="identifier">size</span><span>).</span><span class="identifier">strokeColor</span><span>(</span><span class="identifier">color</span><span>)
    }
})</span></code></pre>

        <hr style="margin-top: 30px"/>
        <footer style="font-size: 90%; text-align: center">
          Doodle Explore is a <a href="https://creativescala.org/">Creative Scala</a> project distributed under the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">Apache-2.0</a> license.
        </footer>

      </main>

    </div>

  </body>
</html>
